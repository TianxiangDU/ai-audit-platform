# 新增功能说明

## 1. 审计证据选项卡

### 功能概述
在项目工作空间中新增了"审计证据"选项卡，用于管理审计过程中收集的各类证据材料。

### 主要特性
- **证据类型支持**：支持图片、文档等多种类型的证据文件
- **拍照取证**：提供拍照取证功能，方便现场收集证据
- **文件上传**：支持多种格式文件上传
- **证据详情**：每个证据包含名称、描述、上传时间、上传人、位置等详细信息
- **标签管理**：支持为证据添加标签，便于分类和检索
- **操作功能**：提供查看、下载、删除等操作

### 证据管理界面
- 证据列表展示，包含文件图标、基本信息和操作按钮
- 支持按类型显示不同的颜色标识
- 显示证据的关联线索信息

## 2. 分享外链功能

### 功能概述
在新建项目和项目资料管理页面增加了分享外链功能，允许外部人员通过专用链接上传文件。

### 主要特性
- **链接生成**：一键生成安全的分享上传链接
- **权限控制**：可设置链接有效期、文件大小限制、文件类型限制
- **审核机制**：可选择是否需要管理员审核上传的文件
- **链接管理**：支持复制链接、预览页面、关闭分享等操作

### 配置选项
- **有效期设置**：可设置链接的过期时间
- **文件限制**：支持设置最大文件大小（5MB-50MB）
- **类型限制**：可指定允许上传的文件类型
- **审核设置**：可选择上传的文件是否需要审核

### 外部上传页面
创建了专门的外部上传页面 (`/share/upload/:shareId`)，特点：
- **独立页面**：不需要登录，无导航栏
- **友好界面**：清晰的上传说明和规则提示
- **进度显示**：实时显示文件上传进度
- **状态反馈**：显示上传成功、待审核等状态
- **错误处理**：文件大小、类型验证和错误提示

## 3. 工作空间优化

### 统计信息增强
在项目工作空间头部新增了"证据统计"区块，显示当前项目的证据数量。

### 页面布局调整
- 标签页从4个调整为4个（开始审计、审计证据、审计成果、项目资料）
- 保持了原有的功能完整性
- 增强了证据管理的可见性

## 4. 技术实现

### 前端组件
- 新增 `ShareUpload.js` 组件处理外部上传
- 增强 `ProjectWorkspace.js` 添加审计证据选项卡
- 优化 `NewProject.js` 和 `ProjectDocuments.js` 添加分享功能

### 路由配置
- 新增 `/share/upload/:shareId` 路由，不使用主应用Layout
- 保持原有路由结构不变

### 状态管理
- 审计证据数据管理
- 分享链接状态管理
- 文件上传进度管理

## 5. 用户体验

### 操作流程
1. **生成分享链接**：在新建项目或项目资料页面点击"生成分享链接"
2. **配置权限**：设置有效期、文件大小限制等
3. **分享链接**：复制链接发送给需要上传文件的人员
4. **外部上传**：外部人员通过链接直接上传文件
5. **审核管理**：如开启审核，管理员需要审核上传的文件

### 安全考虑
- 链接使用随机生成的ID，具有一定的安全性
- 支持设置有效期，避免链接长期有效
- 可设置文件类型和大小限制，防止恶意上传
- 审核机制确保上传内容的合规性

## 6. 后续扩展

### 可优化方向
- 添加批量操作功能
- 支持文件预览功能
- 增加更详细的访问日志
- 支持文件版本管理
- 添加数字签名验证
- 支持文件加密存储

这些新功能显著提升了项目资料管理的便利性和审计证据收集的效率，为AI智慧审计平台提供了更完善的文档管理解决方案。 